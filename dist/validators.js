var e={},t={validateModule:function e(t,{instancePath:n="",parentData:a,parentDataProperty:i,rootData:r=t}={}){let p=null,m=0;if(!t||"object"!=typeof t||Array.isArray(t)){const e={instancePath:n,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===p?p=[e]:p.push(e),m++}o(t,{instancePath:n,parentData:a,parentDataProperty:i,rootData:r})||(p=null===p?o.errors:p.concat(o.errors),m=p.length);if(m>0){const e={type:[]},t={};for(const t of p)"errorMessage"!==t.keyword&&!t.emUsed&&t.instancePath===n&&t.keyword in e&&0===t.schemaPath.indexOf("#")&&/^\/[^\/]*$/.test(t.schemaPath.slice(1))&&(e[t.keyword].push(t),t.emUsed=!0);for(const a in e)if(e[a].length){const i={instancePath:n,schemaPath:"#/errorMessage",keyword:"errorMessage",params:{errors:e[a]},message:a in t?t[a]():s.errorMessage[a]};null===p?p=[i]:p.push(i),m++}const a=[];for(const e of p)e.emUsed||a.push(e);p=a,m=a.length}return e.errors=p,0===m}};const s={$id:"validateModule",$schema:"http://json-schema.org/draft-07/schema#",title:"FoundryVTT module.json",type:"object",allOf:[{$ref:"../shared/properties/module.json"}],errorMessage:{type:"package manifest should be an object"}},n={description:"Packages can require other modules, systems, or worlds be installed to allow their use. If a package has been installed with dependencies, but its dependencies are missing it cannot be enabled.",items:{properties:{manifest:{description:"The manifest attribute provides an explicit manifest URL to be used for downloading the dependency. If a manifest is not provided, the dependency package must exist in the Foundry VTT website directory.",examples:["https://gitlab.com/riccisi/foundryvtt-dice-so-nice/raw/master/module/module.json"],title:"Manifest URL",type:"string"},name:{description:"Dependency entries require the name attribute. If only a name is provided, additional details about the package will be discovered from the Foundry VTT website listing.",examples:["dice-so-nice"],title:"Package Name",type:"string"},type:{description:"The type attribute instructs Foundry VTT that the dependency may be on a different type of package. By default dependencies are assumed to be module, so if you want to depend on a system or world you should be explicit.",enum:["module","system","world"],examples:["module","system","world"],title:"Package Type"}},required:["name"],title:"Dependency Entry",type:"object"},title:"Dependencies",type:"array"};function a(e,{instancePath:t="",parentData:s,parentDataProperty:i,rootData:r=e}={}){let o=null,p=0;if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.name){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"name"},message:"must have required property 'name'"};null===o?o=[e]:o.push(e),p++}if(void 0===e.title){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"title"},message:"must have required property 'title'"};null===o?o=[e]:o.push(e),p++}if(void 0===e.description){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"description"},message:"must have required property 'description'"};null===o?o=[e]:o.push(e),p++}if(void 0===e.author){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"author"},message:"must have required property 'author'"};null===o?o=[e]:o.push(e),p++}if(void 0===e.version){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"version"},message:"must have required property 'version'"};null===o?o=[e]:o.push(e),p++}if(void 0===e.minimumCoreVersion){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"minimumCoreVersion"},message:"must have required property 'minimumCoreVersion'"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.author&&"string"!=typeof e.author){const e={instancePath:t+"/author",schemaPath:"../definitions/base.json#/definitions/author/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.bugs&&"string"!=typeof e.bugs){const e={instancePath:t+"/bugs",schemaPath:"../definitions/base.json#/definitions/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.changelog&&"string"!=typeof e.changelog){const e={instancePath:t+"/changelog",schemaPath:"../definitions/base.json#/definitions/changelog/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.compatibleCoreVersion&&"string"!=typeof e.compatibleCoreVersion){const e={instancePath:t+"/compatibleCoreVersion",schemaPath:"../definitions/base.json#/definitions/compatibleCoreVersion/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.dependencies){let s=e.dependencies;if(Array.isArray(s)){const e=s.length;for(let a=0;a<e;a++){let e=s[a];if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.name){const e={instancePath:t+"/dependencies/"+a,schemaPath:"../definitions/base.json#/definitions/dependencies/items/required",keyword:"required",params:{missingProperty:"name"},message:"must have required property 'name'"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.manifest&&"string"!=typeof e.manifest){const e={instancePath:t+"/dependencies/"+a+"/manifest",schemaPath:"../definitions/base.json#/definitions/dependencies/items/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.name&&"string"!=typeof e.name){const e={instancePath:t+"/dependencies/"+a+"/name",schemaPath:"../definitions/base.json#/definitions/dependencies/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.type){let s=e.type;if("module"!==s&&"system"!==s&&"world"!==s){const e={instancePath:t+"/dependencies/"+a+"/type",schemaPath:"../definitions/base.json#/definitions/dependencies/items/properties/type/enum",keyword:"enum",params:{allowedValues:n.items.properties.type.enum},message:"must be equal to one of the allowed values"};null===o?o=[e]:o.push(e),p++}}}else{const e={instancePath:t+"/dependencies/"+a,schemaPath:"../definitions/base.json#/definitions/dependencies/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[e]:o.push(e),p++}}}else{const e={instancePath:t+"/dependencies",schemaPath:"../definitions/base.json#/definitions/dependencies/type",keyword:"type",params:{type:"array"},message:"must be array"};null===o?o=[e]:o.push(e),p++}}if(void 0!==e.description&&"string"!=typeof e.description){const e={instancePath:t+"/description",schemaPath:"../definitions/base.json#/definitions/description/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.download&&"string"!=typeof e.download){const e={instancePath:t+"/download",schemaPath:"../definitions/base.json#/definitions/download/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.esmodules){let s=e.esmodules;if(Array.isArray(s)){const e=s.length;for(let n=0;n<e;n++)if("string"!=typeof s[n]){const e={instancePath:t+"/esmodules/"+n,schemaPath:"../definitions/base.json#/definitions/esmodules/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}}else{const e={instancePath:t+"/esmodules",schemaPath:"../definitions/base.json#/definitions/esmodules/type",keyword:"type",params:{type:"array"},message:"must be array"};null===o?o=[e]:o.push(e),p++}}if(void 0!==e.languages){let s=e.languages;if(Array.isArray(s)){const e=s.length;for(let n=0;n<e;n++){let e=s[n];if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.lang){const e={instancePath:t+"/languages/"+n,schemaPath:"../definitions/base.json#/definitions/languages/items/required",keyword:"required",params:{missingProperty:"lang"},message:"must have required property 'lang'"};null===o?o=[e]:o.push(e),p++}if(void 0===e.name){const e={instancePath:t+"/languages/"+n,schemaPath:"../definitions/base.json#/definitions/languages/items/required",keyword:"required",params:{missingProperty:"name"},message:"must have required property 'name'"};null===o?o=[e]:o.push(e),p++}if(void 0===e.path){const e={instancePath:t+"/languages/"+n,schemaPath:"../definitions/base.json#/definitions/languages/items/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.lang&&"string"!=typeof e.lang){const e={instancePath:t+"/languages/"+n+"/lang",schemaPath:"../definitions/base.json#/definitions/languages/items/properties/lang/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.name&&"string"!=typeof e.name){const e={instancePath:t+"/languages/"+n+"/name",schemaPath:"../definitions/base.json#/definitions/languages/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.path&&"string"!=typeof e.path){const e={instancePath:t+"/languages/"+n+"/path",schemaPath:"../definitions/base.json#/definitions/languages/items/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}}else{const e={instancePath:t+"/languages/"+n,schemaPath:"../definitions/base.json#/definitions/languages/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[e]:o.push(e),p++}}}else{const e={instancePath:t+"/languages",schemaPath:"../definitions/base.json#/definitions/languages/type",keyword:"type",params:{type:"array"},message:"must be array"};null===o?o=[e]:o.push(e),p++}}if(void 0!==e.license&&"string"!=typeof e.license){const e={instancePath:t+"/license",schemaPath:"../definitions/base.json#/definitions/license/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.minimumCoreVersion&&"string"!=typeof e.minimumCoreVersion){const e={instancePath:t+"/minimumCoreVersion",schemaPath:"../definitions/base.json#/definitions/minimumCoreVersion/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.name&&"string"!=typeof e.name){const e={instancePath:t+"/name",schemaPath:"../definitions/base.json#/definitions/name/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.readme&&"string"!=typeof e.readme){const e={instancePath:t+"/readme",schemaPath:"../definitions/base.json#/definitions/readme/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.scripts){let s=e.scripts;if(Array.isArray(s)){const e=s.length;for(let n=0;n<e;n++)if("string"!=typeof s[n]){const e={instancePath:t+"/scripts/"+n,schemaPath:"../definitions/base.json#/definitions/scripts/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}}else{const e={instancePath:t+"/scripts",schemaPath:"../definitions/base.json#/definitions/scripts/type",keyword:"type",params:{type:"array"},message:"must be array"};null===o?o=[e]:o.push(e),p++}}if(void 0!==e.socket&&"boolean"!=typeof e.socket){const e={instancePath:t+"/socket",schemaPath:"../definitions/base.json#/definitions/socket/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.styles){let s=e.styles;if(Array.isArray(s)){const e=s.length;for(let n=0;n<e;n++)if("string"!=typeof s[n]){const e={instancePath:t+"/styles/"+n,schemaPath:"../definitions/base.json#/definitions/styles/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}}else{const e={instancePath:t+"/styles",schemaPath:"../definitions/base.json#/definitions/styles/type",keyword:"type",params:{type:"array"},message:"must be array"};null===o?o=[e]:o.push(e),p++}}if(void 0!==e.title&&"string"!=typeof e.title){const e={instancePath:t+"/title",schemaPath:"../definitions/base.json#/definitions/title/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.url&&"string"!=typeof e.url){const e={instancePath:t+"/url",schemaPath:"../definitions/base.json#/definitions/url/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.version){let s=e.version;const n=p;let a=!1,i=null;const r=p;if("string"!=typeof s){const e={instancePath:t+"/version",schemaPath:"../definitions/base.json#/definitions/version/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}(m=r===p)&&(a=!0,i=0);const c=p;if("number"!=typeof s||!isFinite(s)){const e={instancePath:t+"/version",schemaPath:"../definitions/base.json#/definitions/version/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};null===o?o=[e]:o.push(e),p++}var m;if((m=c===p)&&a?(a=!1,i=[i,1]):m&&(a=!0,i=1),a)p=n,null!==o&&(n?o.length=n:o=null);else{const e={instancePath:t+"/version",schemaPath:"../definitions/base.json#/definitions/version/oneOf",keyword:"oneOf",params:{passingSchemas:i},message:"must match exactly one schema in oneOf"};null===o?o=[e]:o.push(e),p++}if(p>0){const e=[];for(const s of o)"errorMessage"===s.keyword||s.emUsed||s.instancePath!==t+"/version"&&(0!==s.instancePath.indexOf(t+"/version")||"/"!==s.instancePath[t+"/version".length])||0!==s.schemaPath.indexOf("../definitions/base.json#/definitions/version")||"/"!==s.schemaPath["../definitions/base.json#/definitions/version".length]||(e.push(s),s.emUsed=!0);if(e.length){const s={instancePath:t+"/version",schemaPath:"../definitions/base.json#/definitions/version/errorMessage",keyword:"errorMessage",params:{errors:e},message:"should be a string or number"};null===o?o=[s]:o.push(s),p++}const s=[];for(const e of o)e.emUsed||s.push(e);o=s,p=s.length}}}else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[e]:o.push(e),p++}return a.errors=o,0===p}function i(e,{instancePath:t="",parentData:s,parentDataProperty:n,rootData:r=e}={}){let o=null,p=0;if(a(e,{instancePath:t,parentData:s,parentDataProperty:n,rootData:r})||(o=null===o?a.errors:o.concat(a.errors),p=o.length),e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.manifest&&"string"!=typeof e.manifest){const e={instancePath:t+"/manifest",schemaPath:"../definitions/module.json#/definitions/manifest/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.packs){let s=e.packs;if(Array.isArray(s)){const e=s.length;for(let n=0;n<e;n++){let e=s[n];if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.module){const e={instancePath:t+"/packs/"+n,schemaPath:"../definitions/module.json#/definitions/packs/items/required",keyword:"required",params:{missingProperty:"module"},message:"must have required property 'module'"};null===o?o=[e]:o.push(e),p++}if(void 0===e.name){const e={instancePath:t+"/packs/"+n,schemaPath:"../definitions/module.json#/definitions/packs/items/required",keyword:"required",params:{missingProperty:"name"},message:"must have required property 'name'"};null===o?o=[e]:o.push(e),p++}if(void 0===e.label){const e={instancePath:t+"/packs/"+n,schemaPath:"../definitions/module.json#/definitions/packs/items/required",keyword:"required",params:{missingProperty:"label"},message:"must have required property 'label'"};null===o?o=[e]:o.push(e),p++}if(void 0===e.path){const e={instancePath:t+"/packs/"+n,schemaPath:"../definitions/module.json#/definitions/packs/items/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'"};null===o?o=[e]:o.push(e),p++}if(void 0===e.entity){const e={instancePath:t+"/packs/"+n,schemaPath:"../definitions/module.json#/definitions/packs/items/required",keyword:"required",params:{missingProperty:"entity"},message:"must have required property 'entity'"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.system){let s=e.system;const a=p;let i=!1,r=null;const c=p;if("string"!=typeof s){const e={instancePath:t+"/packs/"+n+"/system",schemaPath:"../definitions/module.json#/definitions/packs/items/properties/system/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}(m=c===p)&&(i=!0,r=0);const y=p;if(Array.isArray(s)){const e=s.length;for(let a=0;a<e;a++)if("string"!=typeof s[a]){const e={instancePath:t+"/packs/"+n+"/system/"+a,schemaPath:"../definitions/module.json#/definitions/packs/items/properties/system/oneOf/1/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}}else{const e={instancePath:t+"/packs/"+n+"/system",schemaPath:"../definitions/module.json#/definitions/packs/items/properties/system/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};null===o?o=[e]:o.push(e),p++}var m;if((m=y===p)&&i?(i=!1,r=[r,1]):m&&(i=!0,r=1),i)p=a,null!==o&&(a?o.length=a:o=null);else{const e={instancePath:t+"/packs/"+n+"/system",schemaPath:"../definitions/module.json#/definitions/packs/items/properties/system/oneOf",keyword:"oneOf",params:{passingSchemas:r},message:"must match exactly one schema in oneOf"};null===o?o=[e]:o.push(e),p++}if(p>0){const e=[];for(const s of o)"errorMessage"===s.keyword||s.emUsed||s.instancePath!==t+"/packs/"+n+"/system"&&(0!==s.instancePath.indexOf(t+"/packs/"+n+"/system")||"/"!==s.instancePath[t+"/packs/"+n+"/system".length])||0!==s.schemaPath.indexOf("../definitions/module.json#/definitions/packs/items/properties/system")||"/"!==s.schemaPath["../definitions/module.json#/definitions/packs/items/properties/system".length]||(e.push(s),s.emUsed=!0);if(e.length){const s={instancePath:t+"/packs/"+n+"/system",schemaPath:"../definitions/module.json#/definitions/packs/items/properties/system/errorMessage",keyword:"errorMessage",params:{errors:e},message:"should be a string or array of strings"};null===o?o=[s]:o.push(s),p++}const s=[];for(const e of o)e.emUsed||s.push(e);o=s,p=s.length}}if(void 0!==e.entity&&"string"!=typeof e.entity){const e={instancePath:t+"/packs/"+n+"/entity",schemaPath:"../definitions/module.json#/definitions/packs/items/properties/entity/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.label&&"string"!=typeof e.label){const e={instancePath:t+"/packs/"+n+"/label",schemaPath:"../definitions/module.json#/definitions/packs/items/properties/label/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.module&&"string"!=typeof e.module){const e={instancePath:t+"/packs/"+n+"/module",schemaPath:"../definitions/module.json#/definitions/packs/items/properties/module/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.name&&"string"!=typeof e.name){const e={instancePath:t+"/packs/"+n+"/name",schemaPath:"../definitions/module.json#/definitions/packs/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}if(void 0!==e.path&&"string"!=typeof e.path){const e={instancePath:t+"/packs/"+n+"/path",schemaPath:"../definitions/module.json#/definitions/packs/items/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}}else{const e={instancePath:t+"/packs/"+n,schemaPath:"../definitions/module.json#/definitions/packs/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[e]:o.push(e),p++}}}else{const e={instancePath:t+"/packs",schemaPath:"../definitions/module.json#/definitions/packs/type",keyword:"type",params:{type:"array"},message:"must be array"};null===o?o=[e]:o.push(e),p++}}if(void 0!==e.system){let s=e.system;const n=p;let a=!1,i=null;const r=p;if("string"!=typeof s){const e={instancePath:t+"/system",schemaPath:"../definitions/module.json#/definitions/system/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}(c=r===p)&&(a=!0,i=0);const m=p;if(Array.isArray(s)){const e=s.length;for(let n=0;n<e;n++)if("string"!=typeof s[n]){const e={instancePath:t+"/system/"+n,schemaPath:"../definitions/module.json#/definitions/system/oneOf/1/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),p++}}else{const e={instancePath:t+"/system",schemaPath:"../definitions/module.json#/definitions/system/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};null===o?o=[e]:o.push(e),p++}var c;if((c=m===p)&&a?(a=!1,i=[i,1]):c&&(a=!0,i=1),a)p=n,null!==o&&(n?o.length=n:o=null);else{const e={instancePath:t+"/system",schemaPath:"../definitions/module.json#/definitions/system/oneOf",keyword:"oneOf",params:{passingSchemas:i},message:"must match exactly one schema in oneOf"};null===o?o=[e]:o.push(e),p++}if(p>0){const e=[];for(const s of o)"errorMessage"===s.keyword||s.emUsed||s.instancePath!==t+"/system"&&(0!==s.instancePath.indexOf(t+"/system")||"/"!==s.instancePath[t+"/system".length])||0!==s.schemaPath.indexOf("../definitions/module.json#/definitions/system")||"/"!==s.schemaPath["../definitions/module.json#/definitions/system".length]||(e.push(s),s.emUsed=!0);if(e.length){const s={instancePath:t+"/system",schemaPath:"../definitions/module.json#/definitions/system/errorMessage",keyword:"errorMessage",params:{errors:e},message:"should be a string or array of strings"};null===o?o=[s]:o.push(s),p++}const s=[];for(const e of o)e.emUsed||s.push(e);o=s,p=s.length}}}else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[e]:o.push(e),p++}return i.errors=o,0===p}function r(e,{instancePath:t="",parentData:s,parentDataProperty:n,rootData:a=e}={}){let i=null,o=0;if(Array.isArray(e)){const s=e.length;for(let n=0;n<s;n++){let s=e[n];if(!s||"object"!=typeof s||Array.isArray(s)){const e={instancePath:t+"/"+n,schemaPath:"#/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}if(s&&"object"==typeof s&&!Array.isArray(s)){if(void 0===s.name){const e={instancePath:t+"/"+n,schemaPath:"#/definitions/properties-author/required",keyword:"required",params:{missingProperty:"name"},message:"must have required property 'name'"};null===i?i=[e]:i.push(e),o++}if(void 0!==s.email&&"string"!=typeof s.email){const e={instancePath:t+"/"+n+"/email",schemaPath:"#/definitions/properties-author/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}if(void 0!==s.name&&"string"!=typeof s.name){const e={instancePath:t+"/"+n+"/name",schemaPath:"#/definitions/properties-author/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}if(void 0!==s.url&&"string"!=typeof s.url){const e={instancePath:t+"/"+n+"/url",schemaPath:"#/definitions/properties-author/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}}}}else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"};null===i?i=[e]:i.push(e),o++}return r.errors=i,0===o}function o(e,{instancePath:t="",parentData:s,parentDataProperty:n,rootData:a=e}={}){let p=null,m=0;if(i(e,{instancePath:t,parentData:s,parentDataProperty:n,rootData:a})||(p=null===p?i.errors:p.concat(i.errors),m=p.length),e&&"object"==typeof e&&!Array.isArray(e))void 0!==e.authors&&(r(e.authors,{instancePath:t+"/authors",parentData:e,parentDataProperty:"authors",rootData:a})||(p=null===p?r.errors:p.concat(r.errors),m=p.length));else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===p?p=[e]:p.push(e),m++}return o.errors=p,0===m}t.validateModulePlus=function e(t,{instancePath:s="",parentData:n,parentDataProperty:a,rootData:i=t}={}){let r=null,o=0;if(!t||"object"!=typeof t||Array.isArray(t)){const e={instancePath:s,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===r?r=[e]:r.push(e),o++}h(t,{instancePath:s,parentData:n,parentDataProperty:a,rootData:i})||(r=null===r?h.errors:r.concat(h.errors),o=r.length);if(o>0){const e={type:[]},t={};for(const t of r)"errorMessage"!==t.keyword&&!t.emUsed&&t.instancePath===s&&t.keyword in e&&0===t.schemaPath.indexOf("#")&&/^\/[^\/]*$/.test(t.schemaPath.slice(1))&&(e[t.keyword].push(t),t.emUsed=!0);for(const n in e)if(e[n].length){const a={instancePath:s,schemaPath:"#/errorMessage",keyword:"errorMessage",params:{errors:e[n]},message:n in t?t[n]():p.errorMessage[n]};null===r?r=[a]:r.push(a),o++}const n=[];for(const e of r)e.emUsed||n.push(e);r=n,o=n.length}return e.errors=r,0===o};const p={$id:"validateModulePlus",$schema:"http://json-schema.org/draft-07/schema#",title:"FoundryVTT module.json w/ manifest+",type:"object",allOf:[{$ref:"../shared/properties/module+.json"}],errorMessage:{type:"package manifest should be an object"}},m={description:"The `conflicts` field is similar to the `dependencies` field in the core Foundry VTT manifest specification, but provides a mapping of packages which can not interoperate with the given package.",items:{properties:{name:{description:"The name of the conflict package.",examples:["dice-so-nice"],title:"Conflict Package Name",type:"string"},type:{description:"The type of the conflict package",enum:["module","system","world"],examples:["module","system","world"],title:"Conflict Package Type"},versionMax:{description:"Defines a maximum version number for the package within which the conflict occurs.",errorMessage:"should be a string or number",examples:["1.0.0"],oneOf:[{type:"string"},{type:"number"}],title:"Conflict Maximum Version"},versionMin:{description:"Defines a minimum version number for the package within which the conflict occurs.",errorMessage:"should be a string or number",examples:["1.0.0"],oneOf:[{type:"string"},{type:"number"}],title:"Conflict Minimum Version"}},required:["name","type"],title:"Conflict Entry",type:"object"},title:"Conflicts",type:"array"},c={description:"An object that provides data for a single multimedia item.",required:["type","url"],title:"Media Entry",type:"object",properties:{type:{description:"Indicates what kind of media.",enum:["cover","icon","screenshot","video"],title:"Media Type"},url:{description:"Public URL of the media resource.",title:"Media URL",type:"string"},loop:{description:"Optional field specific to video media. If loop is set to true, the video is expected to be treated as an animated image, like a GIF (i.e. muted and looped).",title:"Video Loop",type:"boolean"},thumbnail:{description:"Optional URL to provide a video thumbnail.",title:"Video Thumbnail",type:"string"}}};function y(e,{instancePath:t="",parentData:s,parentDataProperty:n,rootData:a=e}={}){let i=null,r=0;if(Array.isArray(e)){const s=e.length;for(let n=0;n<s;n++){let s=e[n];if(s&&"object"==typeof s&&!Array.isArray(s)){if(void 0===s.type){const e={instancePath:t+"/"+n,schemaPath:"#/definitions/media-item-loose/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'"};null===i?i=[e]:i.push(e),r++}if(void 0===s.url){const e={instancePath:t+"/"+n,schemaPath:"#/definitions/media-item-loose/required",keyword:"required",params:{missingProperty:"url"},message:"must have required property 'url'"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.type){let e=s.type;if("cover"!==e&&"icon"!==e&&"screenshot"!==e&&"video"!==e){const e={instancePath:t+"/"+n+"/type",schemaPath:"#/definitions/media-item-loose/properties/type/enum",keyword:"enum",params:{allowedValues:c.properties.type.enum},message:"must be equal to one of the allowed values"};null===i?i=[e]:i.push(e),r++}}if(void 0!==s.url&&"string"!=typeof s.url){const e={instancePath:t+"/"+n+"/url",schemaPath:"#/definitions/media-item-loose/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.loop&&"boolean"!=typeof s.loop){const e={instancePath:t+"/"+n+"/loop",schemaPath:"#/definitions/media-item-loose/properties/loop/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.thumbnail&&"string"!=typeof s.thumbnail){const e={instancePath:t+"/"+n+"/thumbnail",schemaPath:"#/definitions/media-item-loose/properties/thumbnail/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}}else{const e={instancePath:t+"/"+n,schemaPath:"#/definitions/media-item-loose/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),r++}}}else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"};null===i?i=[e]:i.push(e),r++}return y.errors=i,0===r}function l(e,{instancePath:t="",parentData:s,parentDataProperty:n,rootData:a=e}={}){let i=null,r=0;if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.conflicts){let s=e.conflicts;if(Array.isArray(s)){const e=s.length;for(let n=0;n<e;n++){let e=s[n];if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.name){const e={instancePath:t+"/conflicts/"+n,schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/required",keyword:"required",params:{missingProperty:"name"},message:"must have required property 'name'"};null===i?i=[e]:i.push(e),r++}if(void 0===e.type){const e={instancePath:t+"/conflicts/"+n,schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'"};null===i?i=[e]:i.push(e),r++}if(void 0!==e.name&&"string"!=typeof e.name){const e={instancePath:t+"/conflicts/"+n+"/name",schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==e.type){let s=e.type;if("module"!==s&&"system"!==s&&"world"!==s){const e={instancePath:t+"/conflicts/"+n+"/type",schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/properties/type/enum",keyword:"enum",params:{allowedValues:m.items.properties.type.enum},message:"must be equal to one of the allowed values"};null===i?i=[e]:i.push(e),r++}}if(void 0!==e.versionMax){let s=e.versionMax;const a=r;let p=!1,m=null;const c=r;if("string"!=typeof s){const e={instancePath:t+"/conflicts/"+n+"/versionMax",schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/properties/versionMax/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}(o=c===r)&&(p=!0,m=0);const y=r;if("number"!=typeof s||!isFinite(s)){const e={instancePath:t+"/conflicts/"+n+"/versionMax",schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/properties/versionMax/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};null===i?i=[e]:i.push(e),r++}var o;if((o=y===r)&&p?(p=!1,m=[m,1]):o&&(p=!0,m=1),p)r=a,null!==i&&(a?i.length=a:i=null);else{const e={instancePath:t+"/conflicts/"+n+"/versionMax",schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/properties/versionMax/oneOf",keyword:"oneOf",params:{passingSchemas:m},message:"must match exactly one schema in oneOf"};null===i?i=[e]:i.push(e),r++}if(r>0){const e=[];for(const s of i)"errorMessage"===s.keyword||s.emUsed||s.instancePath!==t+"/conflicts/"+n+"/versionMax"&&(0!==s.instancePath.indexOf(t+"/conflicts/"+n+"/versionMax")||"/"!==s.instancePath[t+"/conflicts/"+n+"/versionMax".length])||0!==s.schemaPath.indexOf("../definitions/base-manifest+.json#/definitions/conflicts/items/properties/versionMax")||"/"!==s.schemaPath["../definitions/base-manifest+.json#/definitions/conflicts/items/properties/versionMax".length]||(e.push(s),s.emUsed=!0);if(e.length){const s={instancePath:t+"/conflicts/"+n+"/versionMax",schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/properties/versionMax/errorMessage",keyword:"errorMessage",params:{errors:e},message:"should be a string or number"};null===i?i=[s]:i.push(s),r++}const s=[];for(const e of i)e.emUsed||s.push(e);i=s,r=s.length}}if(void 0!==e.versionMin){let s=e.versionMin;const a=r;let o=!1,m=null;const c=r;if("string"!=typeof s){const e={instancePath:t+"/conflicts/"+n+"/versionMin",schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/properties/versionMin/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}(p=c===r)&&(o=!0,m=0);const y=r;if("number"!=typeof s||!isFinite(s)){const e={instancePath:t+"/conflicts/"+n+"/versionMin",schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/properties/versionMin/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};null===i?i=[e]:i.push(e),r++}var p;if((p=y===r)&&o?(o=!1,m=[m,1]):p&&(o=!0,m=1),o)r=a,null!==i&&(a?i.length=a:i=null);else{const e={instancePath:t+"/conflicts/"+n+"/versionMin",schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/properties/versionMin/oneOf",keyword:"oneOf",params:{passingSchemas:m},message:"must match exactly one schema in oneOf"};null===i?i=[e]:i.push(e),r++}if(r>0){const e=[];for(const s of i)"errorMessage"===s.keyword||s.emUsed||s.instancePath!==t+"/conflicts/"+n+"/versionMin"&&(0!==s.instancePath.indexOf(t+"/conflicts/"+n+"/versionMin")||"/"!==s.instancePath[t+"/conflicts/"+n+"/versionMin".length])||0!==s.schemaPath.indexOf("../definitions/base-manifest+.json#/definitions/conflicts/items/properties/versionMin")||"/"!==s.schemaPath["../definitions/base-manifest+.json#/definitions/conflicts/items/properties/versionMin".length]||(e.push(s),s.emUsed=!0);if(e.length){const s={instancePath:t+"/conflicts/"+n+"/versionMin",schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/properties/versionMin/errorMessage",keyword:"errorMessage",params:{errors:e},message:"should be a string or number"};null===i?i=[s]:i.push(s),r++}const s=[];for(const e of i)e.emUsed||s.push(e);i=s,r=s.length}}}else{const e={instancePath:t+"/conflicts/"+n,schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),r++}}}else{const e={instancePath:t+"/conflicts",schemaPath:"../definitions/base-manifest+.json#/definitions/conflicts/type",keyword:"type",params:{type:"array"},message:"must be array"};null===i?i=[e]:i.push(e),r++}}if(void 0!==e.deprecated){let s=e.deprecated;if(s&&"object"==typeof s&&!Array.isArray(s)){if(void 0!==s.alternatives){let e=s.alternatives;if(Array.isArray(e)){const s=e.length;for(let n=0;n<s;n++){let s=e[n];if(s&&"object"==typeof s&&!Array.isArray(s)){if(void 0===s.name){const e={instancePath:t+"/deprecated/alternatives/"+n,schemaPath:"../definitions/base-manifest+.json#/definitions/deprecated/properties/alternatives/items/required",keyword:"required",params:{missingProperty:"name"},message:"must have required property 'name'"};null===i?i=[e]:i.push(e),r++}if(void 0===s.manifest){const e={instancePath:t+"/deprecated/alternatives/"+n,schemaPath:"../definitions/base-manifest+.json#/definitions/deprecated/properties/alternatives/items/required",keyword:"required",params:{missingProperty:"manifest"},message:"must have required property 'manifest'"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.name&&"string"!=typeof s.name){const e={instancePath:t+"/deprecated/alternatives/"+n+"/name",schemaPath:"../definitions/base-manifest+.json#/definitions/deprecated/properties/alternatives/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.manifest&&"string"!=typeof s.manifest){const e={instancePath:t+"/deprecated/alternatives/"+n+"/manifest",schemaPath:"../definitions/base-manifest+.json#/definitions/deprecated/properties/alternatives/items/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}}else{const e={instancePath:t+"/deprecated/alternatives/"+n,schemaPath:"../definitions/base-manifest+.json#/definitions/deprecated/properties/alternatives/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),r++}}}else{const e={instancePath:t+"/deprecated/alternatives",schemaPath:"../definitions/base-manifest+.json#/definitions/deprecated/properties/alternatives/type",keyword:"type",params:{type:"array"},message:"must be array"};null===i?i=[e]:i.push(e),r++}}if(void 0!==s.coreVersion&&"string"!=typeof s.coreVersion){const e={instancePath:t+"/deprecated/coreVersion",schemaPath:"../definitions/base-manifest+.json#/definitions/deprecated/properties/coreVersion/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.reason&&"string"!=typeof s.reason){const e={instancePath:t+"/deprecated/reason",schemaPath:"../definitions/base-manifest+.json#/definitions/deprecated/properties/reason/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}}else{const e={instancePath:t+"/deprecated",schemaPath:"../definitions/base-manifest+.json#/definitions/deprecated/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),r++}}if(void 0!==e.includes){let s=e.includes;if(Array.isArray(s)){const e=s.length;for(let n=0;n<e;n++)if("string"!=typeof s[n]){const e={instancePath:t+"/includes/"+n,schemaPath:"../definitions/base-manifest+.json#/definitions/includes/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}}else{const e={instancePath:t+"/includes",schemaPath:"../definitions/base-manifest+.json#/definitions/includes/type",keyword:"type",params:{type:"array"},message:"must be array"};null===i?i=[e]:i.push(e),r++}}if(void 0!==e.library&&"boolean"!=typeof e.library){const e={instancePath:t+"/library",schemaPath:"../definitions/base-manifest+.json#/definitions/library/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};null===i?i=[e]:i.push(e),r++}if(void 0!==e.manifestPlusVersion&&"string"!=typeof e.manifestPlusVersion){const e={instancePath:t+"/manifestPlusVersion",schemaPath:"../definitions/base-manifest+.json#/definitions/manifestPlusVersion/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}void 0!==e.media&&(y(e.media,{instancePath:t+"/media",parentData:e,parentDataProperty:"media",rootData:a})||(i=null===i?y.errors:i.concat(y.errors),r=i.length))}else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),r++}return l.errors=i,0===r}function d(e,{instancePath:t="",parentData:s,parentDataProperty:n,rootData:a=e}={}){let i=null,r=0;if(Array.isArray(e)){const s=e.length;for(let n=0;n<s;n++){let s=e[n];if(!s||"object"!=typeof s||Array.isArray(s)){const e={instancePath:t+"/"+n,schemaPath:"#/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),r++}if(s&&"object"==typeof s&&!Array.isArray(s)){if(void 0===s.name){const e={instancePath:t+"/"+n,schemaPath:"#/definitions/properties-author/required",keyword:"required",params:{missingProperty:"name"},message:"must have required property 'name'"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.email&&"string"!=typeof s.email){const e={instancePath:t+"/"+n+"/email",schemaPath:"#/definitions/properties-author/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.name&&"string"!=typeof s.name){const e={instancePath:t+"/"+n+"/name",schemaPath:"#/definitions/properties-author/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.url&&"string"!=typeof s.url){const e={instancePath:t+"/"+n+"/url",schemaPath:"#/definitions/properties-author/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}}if(s&&"object"==typeof s&&!Array.isArray(s)){if(void 0!==s.discord&&"string"!=typeof s.discord){const e={instancePath:t+"/"+n+"/discord",schemaPath:"#/definitions/properties-author+/properties/discord/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s["ko-fi"]&&"string"!=typeof s["ko-fi"]){const e={instancePath:t+"/"+n+"/ko-fi",schemaPath:"#/definitions/properties-author+/properties/ko-fi/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.patreon&&"string"!=typeof s.patreon){const e={instancePath:t+"/"+n+"/patreon",schemaPath:"#/definitions/properties-author+/properties/patreon/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.reddit&&"string"!=typeof s.reddit){const e={instancePath:t+"/"+n+"/reddit",schemaPath:"#/definitions/properties-author+/properties/reddit/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.twitter&&"string"!=typeof s.twitter){const e={instancePath:t+"/"+n+"/twitter",schemaPath:"#/definitions/properties-author+/properties/twitter/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}}}}else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"};null===i?i=[e]:i.push(e),r++}return d.errors=i,0===r}function h(e,{instancePath:t="",parentData:s,parentDataProperty:n,rootData:a=e}={}){let r=null,o=0;if(l(e,{instancePath:t,parentData:s,parentDataProperty:n,rootData:a})||(r=null===r?l.errors:r.concat(l.errors),o=r.length),i(e,{instancePath:t,parentData:s,parentDataProperty:n,rootData:a})||(r=null===r?i.errors:r.concat(i.errors),o=r.length),e&&"object"==typeof e&&!Array.isArray(e))void 0!==e.authors&&(d(e.authors,{instancePath:t+"/authors",parentData:e,parentDataProperty:"authors",rootData:a})||(r=null===r?d.errors:r.concat(d.errors),o=r.length));else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===r?r=[e]:r.push(e),o++}return h.errors=r,0===o}t.validateSystem=function e(t,{instancePath:s="",parentData:n,parentDataProperty:a,rootData:i=t}={}){let r=null,o=0;if(!t||"object"!=typeof t||Array.isArray(t)){const e={instancePath:s,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===r?r=[e]:r.push(e),o++}k(t,{instancePath:s,parentData:n,parentDataProperty:a,rootData:i})||(r=null===r?k.errors:r.concat(k.errors),o=r.length);if(o>0){const e={type:[]},t={};for(const t of r)"errorMessage"!==t.keyword&&!t.emUsed&&t.instancePath===s&&t.keyword in e&&0===t.schemaPath.indexOf("#")&&/^\/[^\/]*$/.test(t.schemaPath.slice(1))&&(e[t.keyword].push(t),t.emUsed=!0);for(const n in e)if(e[n].length){const a={instancePath:s,schemaPath:"#/errorMessage",keyword:"errorMessage",params:{errors:e[n]},message:n in t?t[n]():u.errorMessage[n]};null===r?r=[a]:r.push(a),o++}const n=[];for(const e of r)e.emUsed||n.push(e);r=n,o=n.length}return e.errors=r,0===o};const u={$id:"validateSystem",$schema:"http://json-schema.org/draft-07/schema#",title:"FoundryVTT system.json",type:"object",allOf:[{$ref:"../shared/properties/system.json"}],errorMessage:{type:"package manifest should be an object"}},f={description:"An attribute path within the system data model that points to an object that contains both a value and max key. The prototype Token for each Actor created in this system will automatically have this resource assigned as it's primary bar. Omit this key or set it to null for no default attribute.",examples:["resources.health"],title:"Primary Token Attribute",type:["null","string"]},g={description:"An attribute path within the system data model that points to an object that contains both a value and max key. The prototype Token for each Actor created in this system will automatically have this resource assigned as it's secondary bar. Omit this key or set it to null for no default attribute.",examples:["resources.power"],title:"Secondary Token Attribute",type:["null","string"]};function P(e,{instancePath:t="",parentData:s,parentDataProperty:n,rootData:i=e}={}){let r=null,o=0;if(a(e,{instancePath:t,parentData:s,parentDataProperty:n,rootData:i})||(r=null===r?a.errors:r.concat(a.errors),o=r.length),e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.gridDistance){let s=e.gridDistance;if("number"!=typeof s||s%1||isNaN(s)||!isFinite(s)){const e={instancePath:t+"/gridDistance",schemaPath:"../definitions/system.json#/definitions/gridDistance/type",keyword:"type",params:{type:"integer"},message:"must be integer"};null===r?r=[e]:r.push(e),o++}}if(void 0!==e.gridUnits&&"string"!=typeof e.gridUnits){const e={instancePath:t+"/gridUnits",schemaPath:"../definitions/system.json#/definitions/gridUnits/type",keyword:"type",params:{type:"string"},message:"must be string"};null===r?r=[e]:r.push(e),o++}if(void 0!==e.initiative&&"string"!=typeof e.initiative){const e={instancePath:t+"/initiative",schemaPath:"../definitions/system.json#/definitions/initiative/type",keyword:"type",params:{type:"string"},message:"must be string"};null===r?r=[e]:r.push(e),o++}if(void 0!==e.manifest&&"string"!=typeof e.manifest){const e={instancePath:t+"/manifest",schemaPath:"../definitions/system.json#/definitions/manifest/type",keyword:"type",params:{type:"string"},message:"must be string"};null===r?r=[e]:r.push(e),o++}if(void 0!==e.packs){let s=e.packs;if(Array.isArray(s)){const e=s.length;for(let n=0;n<e;n++){let e=s[n];if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.system){const e={instancePath:t+"/packs/"+n,schemaPath:"../definitions/system.json#/definitions/packs/items/required",keyword:"required",params:{missingProperty:"system"},message:"must have required property 'system'"};null===r?r=[e]:r.push(e),o++}if(void 0===e.name){const e={instancePath:t+"/packs/"+n,schemaPath:"../definitions/system.json#/definitions/packs/items/required",keyword:"required",params:{missingProperty:"name"},message:"must have required property 'name'"};null===r?r=[e]:r.push(e),o++}if(void 0===e.label){const e={instancePath:t+"/packs/"+n,schemaPath:"../definitions/system.json#/definitions/packs/items/required",keyword:"required",params:{missingProperty:"label"},message:"must have required property 'label'"};null===r?r=[e]:r.push(e),o++}if(void 0===e.path){const e={instancePath:t+"/packs/"+n,schemaPath:"../definitions/system.json#/definitions/packs/items/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'"};null===r?r=[e]:r.push(e),o++}if(void 0===e.entity){const e={instancePath:t+"/packs/"+n,schemaPath:"../definitions/system.json#/definitions/packs/items/required",keyword:"required",params:{missingProperty:"entity"},message:"must have required property 'entity'"};null===r?r=[e]:r.push(e),o++}if(void 0!==e.system&&"string"!=typeof e.system){const e={instancePath:t+"/packs/"+n+"/system",schemaPath:"../definitions/system.json#/definitions/packs/items/properties/system/type",keyword:"type",params:{type:"string"},message:"must be string"};null===r?r=[e]:r.push(e),o++}if(void 0!==e.entity&&"string"!=typeof e.entity){const e={instancePath:t+"/packs/"+n+"/entity",schemaPath:"../definitions/system.json#/definitions/packs/items/properties/entity/type",keyword:"type",params:{type:"string"},message:"must be string"};null===r?r=[e]:r.push(e),o++}if(void 0!==e.label&&"string"!=typeof e.label){const e={instancePath:t+"/packs/"+n+"/label",schemaPath:"../definitions/system.json#/definitions/packs/items/properties/label/type",keyword:"type",params:{type:"string"},message:"must be string"};null===r?r=[e]:r.push(e),o++}if(void 0!==e.module&&"string"!=typeof e.module){const e={instancePath:t+"/packs/"+n+"/module",schemaPath:"../definitions/system.json#/definitions/packs/items/properties/module/type",keyword:"type",params:{type:"string"},message:"must be string"};null===r?r=[e]:r.push(e),o++}if(void 0!==e.name&&"string"!=typeof e.name){const e={instancePath:t+"/packs/"+n+"/name",schemaPath:"../definitions/system.json#/definitions/packs/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};null===r?r=[e]:r.push(e),o++}if(void 0!==e.path&&"string"!=typeof e.path){const e={instancePath:t+"/packs/"+n+"/path",schemaPath:"../definitions/system.json#/definitions/packs/items/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"};null===r?r=[e]:r.push(e),o++}}else{const e={instancePath:t+"/packs/"+n,schemaPath:"../definitions/system.json#/definitions/packs/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===r?r=[e]:r.push(e),o++}}}else{const e={instancePath:t+"/packs",schemaPath:"../definitions/system.json#/definitions/packs/type",keyword:"type",params:{type:"array"},message:"must be array"};null===r?r=[e]:r.push(e),o++}}if(void 0!==e.primaryTokenAttribute){let s=e.primaryTokenAttribute;if(null!==s&&"string"!=typeof s){const e={instancePath:t+"/primaryTokenAttribute",schemaPath:"../definitions/system.json#/definitions/primaryTokenAttribute/type",keyword:"type",params:{type:f.type},message:"must be null,string"};null===r?r=[e]:r.push(e),o++}}if(void 0!==e.secondaryTokenAttribute){let s=e.secondaryTokenAttribute;if(null!==s&&"string"!=typeof s){const e={instancePath:t+"/secondaryTokenAttribute",schemaPath:"../definitions/system.json#/definitions/secondaryTokenAttribute/type",keyword:"type",params:{type:g.type},message:"must be null,string"};null===r?r=[e]:r.push(e),o++}}if(void 0!==e.templateVersion){let s=e.templateVersion;if("number"!=typeof s||s%1||isNaN(s)||!isFinite(s)){const e={instancePath:t+"/templateVersion",schemaPath:"../definitions/system.json#/definitions/templateVersion/type",keyword:"type",params:{type:"integer"},message:"must be integer"};null===r?r=[e]:r.push(e),o++}}}else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===r?r=[e]:r.push(e),o++}return P.errors=r,0===o}function b(e,{instancePath:t="",parentData:s,parentDataProperty:n,rootData:a=e}={}){let i=null,r=0;if(Array.isArray(e)){const s=e.length;for(let n=0;n<s;n++){let s=e[n];if(!s||"object"!=typeof s||Array.isArray(s)){const e={instancePath:t+"/"+n,schemaPath:"#/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),r++}if(s&&"object"==typeof s&&!Array.isArray(s)){if(void 0===s.name){const e={instancePath:t+"/"+n,schemaPath:"#/definitions/properties-author/required",keyword:"required",params:{missingProperty:"name"},message:"must have required property 'name'"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.email&&"string"!=typeof s.email){const e={instancePath:t+"/"+n+"/email",schemaPath:"#/definitions/properties-author/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.name&&"string"!=typeof s.name){const e={instancePath:t+"/"+n+"/name",schemaPath:"#/definitions/properties-author/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.url&&"string"!=typeof s.url){const e={instancePath:t+"/"+n+"/url",schemaPath:"#/definitions/properties-author/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}}}}else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"};null===i?i=[e]:i.push(e),r++}return b.errors=i,0===r}function k(e,{instancePath:t="",parentData:s,parentDataProperty:n,rootData:a=e}={}){let i=null,r=0;if(P(e,{instancePath:t,parentData:s,parentDataProperty:n,rootData:a})||(i=null===i?P.errors:i.concat(P.errors),r=i.length),e&&"object"==typeof e&&!Array.isArray(e))void 0!==e.authors&&(b(e.authors,{instancePath:t+"/authors",parentData:e,parentDataProperty:"authors",rootData:a})||(i=null===i?b.errors:i.concat(b.errors),r=i.length));else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),r++}return k.errors=i,0===r}t.validateSystemPlus=function e(t,{instancePath:s="",parentData:n,parentDataProperty:a,rootData:i=t}={}){let r=null,o=0;if(!t||"object"!=typeof t||Array.isArray(t)){const e={instancePath:s,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===r?r=[e]:r.push(e),o++}j(t,{instancePath:s,parentData:n,parentDataProperty:a,rootData:i})||(r=null===r?j.errors:r.concat(j.errors),o=r.length);if(o>0){const e={type:[]},t={};for(const t of r)"errorMessage"!==t.keyword&&!t.emUsed&&t.instancePath===s&&t.keyword in e&&0===t.schemaPath.indexOf("#")&&/^\/[^\/]*$/.test(t.schemaPath.slice(1))&&(e[t.keyword].push(t),t.emUsed=!0);for(const n in e)if(e[n].length){const a={instancePath:s,schemaPath:"#/errorMessage",keyword:"errorMessage",params:{errors:e[n]},message:n in t?t[n]():v.errorMessage[n]};null===r?r=[a]:r.push(a),o++}const n=[];for(const e of r)e.emUsed||n.push(e);r=n,o=n.length}return e.errors=r,0===o};const v={$id:"validateSystemPlus",$schema:"http://json-schema.org/draft-07/schema#",title:"FoundryVTT system.json w/ manifest+",type:"object",allOf:[{$ref:"../shared/properties/system+.json"}],errorMessage:{type:"package manifest should be an object"}};function w(e,{instancePath:t="",parentData:s,parentDataProperty:n,rootData:a=e}={}){let i=null,r=0;if(Array.isArray(e)){const s=e.length;for(let n=0;n<s;n++){let s=e[n];if(!s||"object"!=typeof s||Array.isArray(s)){const e={instancePath:t+"/"+n,schemaPath:"#/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),r++}if(s&&"object"==typeof s&&!Array.isArray(s)){if(void 0===s.name){const e={instancePath:t+"/"+n,schemaPath:"#/definitions/properties-author/required",keyword:"required",params:{missingProperty:"name"},message:"must have required property 'name'"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.email&&"string"!=typeof s.email){const e={instancePath:t+"/"+n+"/email",schemaPath:"#/definitions/properties-author/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.name&&"string"!=typeof s.name){const e={instancePath:t+"/"+n+"/name",schemaPath:"#/definitions/properties-author/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.url&&"string"!=typeof s.url){const e={instancePath:t+"/"+n+"/url",schemaPath:"#/definitions/properties-author/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}}if(s&&"object"==typeof s&&!Array.isArray(s)){if(void 0!==s.discord&&"string"!=typeof s.discord){const e={instancePath:t+"/"+n+"/discord",schemaPath:"#/definitions/properties-author+/properties/discord/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s["ko-fi"]&&"string"!=typeof s["ko-fi"]){const e={instancePath:t+"/"+n+"/ko-fi",schemaPath:"#/definitions/properties-author+/properties/ko-fi/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.patreon&&"string"!=typeof s.patreon){const e={instancePath:t+"/"+n+"/patreon",schemaPath:"#/definitions/properties-author+/properties/patreon/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.reddit&&"string"!=typeof s.reddit){const e={instancePath:t+"/"+n+"/reddit",schemaPath:"#/definitions/properties-author+/properties/reddit/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}if(void 0!==s.twitter&&"string"!=typeof s.twitter){const e={instancePath:t+"/"+n+"/twitter",schemaPath:"#/definitions/properties-author+/properties/twitter/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),r++}}}}else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"};null===i?i=[e]:i.push(e),r++}return w.errors=i,0===r}function j(e,{instancePath:t="",parentData:s,parentDataProperty:n,rootData:a=e}={}){let i=null,r=0;if(l(e,{instancePath:t,parentData:s,parentDataProperty:n,rootData:a})||(i=null===i?l.errors:i.concat(l.errors),r=i.length),P(e,{instancePath:t,parentData:s,parentDataProperty:n,rootData:a})||(i=null===i?P.errors:i.concat(P.errors),r=i.length),e&&"object"==typeof e&&!Array.isArray(e))void 0!==e.authors&&(w(e.authors,{instancePath:t+"/authors",parentData:e,parentDataProperty:"authors",rootData:a})||(i=null===i?w.errors:i.concat(w.errors),r=i.length));else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),r++}return j.errors=i,0===r}const{validateModule:A}=t,{validateModulePlus:D}=t,{validateSystem:q}=t,{validateSystemPlus:M}=t;function x(e){const t=(s,n)=>{const a=e(s,n);return t.errors=e.errors,!a&&Array.isArray(t.errors)&&t.errors.length>0&&(t.errors=t.errors.filter((e=>"if"!==e.keyword&&"pattern"!==e.keyword))),a};return t}var O=e.validateModule=x(A),T=e.validateModulePlus=x(D),V=e.validateSystem=x(q),U=e.validateSystemPlus=x(M);export{e as default,O as validateModule,T as validateModulePlus,V as validateSystem,U as validateSystemPlus};
//# sourceMappingURL=validators.js.map
